<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Pendaftaran Try Out Akbar TKA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        .form-container {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        .form-container:hover {
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        input:focus, textarea:focus, select:focus {
            border-color: #4f46e5 !important;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2) !important;
        }
        .btn-submit {
            background: linear-gradient(90deg, #4f46e5, #7c3aed);
            transition: all 0.3s ease;
        }
        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 14px rgba(79, 70, 229, 0.3);
        }
        .success-message {
            opacity: 0;
            transition: all 0.5s ease;
        }
        .show-message {
            opacity: 1;
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">
    <div class="form-container bg-white rounded-xl p-8 w-full max-w-2xl">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">Form Pendaftaran Try Out Akbar TKA</h1>
            <p class="text-gray-600">Isi form berikut untuk mendaftar. Data Anda akan disimpan ke Google Spreadsheet kami.</p>
        </div>

        <form id="registrationForm" class="space-y-6">
            <div>
                <label for="nama" class="block text-sm font-medium text-gray-700 mb-1">Nama Lengkap <span class="text-red-500">*</span></label>
                <input type="text" id="nama" name="nama" required 
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
            </div>

            <div>
                <label for="whatsapp" class="block text-sm font-medium text-gray-700 mb-1">Nomor Whatsapp <span class="text-red-500">*</span></label>
                <input type="tel" id="whatsapp" name="whatsapp" required 
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
            </div>

            <div>
                <label for="asal_sekolah" class="block text-sm font-medium text-gray-700 mb-1">Asal Sekolah <span class="text-red-500">*</span></label>
                <input type="text" id="asal_sekolah" name="asal_sekolah" required 
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Dapat Info Dari <span class="text-red-500">*</span></label>
                <select id="info_dari" name="info_dari" required 
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <option value="">Pilih salah satu</option>
                    <option value="Cabang Bandung-1 (Tamansari)">Cabang Bandung-1 (Tamansari)</option>
                    <option value="Cabang Bandung-2 (Buahbatu)">Cabang Bandung-2 (Buahbatu)</option>
                    <option value="Cabang Bandung-3 (Cimahi)">Cabang Bandung-3 (Cimahi)</option>
                    <option value="Cabang Bandung-4 (Antapani)">Cabang Bandung-4 (Antapani)</option>
                    <option value="Cabang Bandung-5 (Abdurrahman Saleh)">Cabang Bandung-5 (Abdurrahman Saleh)</option>
                    <option value="Cabang Bandung-6 (Kopo)">Cabang Bandung-6 (Kopo)</option>
                    <option value="Cabang Bandung-7 (Cipacing)">Cabang Bandung-7 (Cipacing)</option>
                    <option value="Sosial Media">Sosial Media</option>
                    <option value="lain-lain">Lain-lain (isi teks manual)</option>
                </select>
                <input type="text" id="info_lain" name="info_lain" placeholder="Jika lain-lain, silakan isi" 
                    class="mt-2 w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 hidden">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Kelas <span class="text-red-500">*</span></label>
                <select id="kelas" name="kelas" required 
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <option value="">Pilih salah satu</option>
                    <option value="1 SMA">1 SMA</option>
                    <option value="2 SMA">2 SMA</option>
                    <option value="3 SMA">3 SMA</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Mapel Pilihan 1 <span class="text-red-500">*</span></label>
                <select id="mapel1" name="mapel1" required 
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <option value="">Pilih salah satu</option>
                    <option value="Matematika Lanjut">Matematika Lanjut</option>
                    <option value="Fisika">Fisika</option>
                    <option value="Kimia">Kimia</option>
                    <option value="Biologi">Biologi</option>
                    <option value="Sejarah">Sejarah</option>
                    <option value="Ekonomi">Ekonomi</option>
                    <option value="Sosiologi">Sosiologi</option>
                    <option value="Geografi">Geografi</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Mapel Pilihan 2 <span class="text-red-500">*</span></label>
                <select id="mapel2" name="mapel2" required 
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <option value="">Pilih salah satu</option>
                    <option value="Matematika Lanjut">Matematika Lanjut</option>
                    <option value="Fisika">Fisika</option>
                    <option value="Kimia">Kimia</option>
                    <option value="Biologi">Biologi</option>
                    <option value="Sejarah">Sejarah</option>
                    <option value="Ekonomi">Ekonomi</option>
                    <option value="Sosiologi">Sosiologi</option>
                    <option value="Geografi">Geografi</option>
                </select>
            </div>

            <div class="mt-4">
                <p class="text-sm text-gray-600">Info Pembayaran: Silakan transfer ke nomor rekening XXXXXXXXXX</p>
            </div>

            <div>
                <label for="bukti_pembayaran" class="block text-sm font-medium text-gray-700 mb-1">Upload Bukti Pembayaran <span class="text-red-500">*</span></label>
                <input type="file" id="bukti_pembayaran" name="bukti_pembayaran" required 
                    class="w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
            </div>

            <div class="pt-4">
                <button type="submit" class="btn-submit text-white py-3 px-6 rounded-lg font-medium w-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">
                    <i class="fas fa-paper-plane mr-2"></i> Daftar Sekarang
                </button>
            </div>
        </form>

        <div id="successMessage" class="success-message mt-6 p-4 bg-green-50 text-green-700 rounded-lg border border-green-200 text-center">
            <i class="fas fa-check-circle text-2xl mb-2"></i>
            <h3 class="font-bold">Pendaftaran Berhasil!</h3>
            <p class="text-sm">Data Anda telah tersimpan. Kami akan menghubungi Anda segera.</p>
        </div>
    </div>

    <script>
        document.getElementById('info_dari').addEventListener('change', function() {
            const infoLainInput = document.getElementById('info_lain');
            if (this.value === 'lain-lain') {
                infoLainInput.classList.remove('hidden');
            } else {
                infoLainInput.classList.add('hidden');
                infoLainInput.value = ''; // Reset input
            }
        });

        document.getElementById('registrationForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  
  const formData = {
    nama: document.getElementById('nama').value,
    whatsapp: document.getElementById('whatsapp').value,
    asal_sekolah: document.getElementById('asal_sekolah').value,
    info_dari: document.getElementById('info_dari').value,
    info_lain: document.getElementById('info_lain').value || '',
    kelas: document.getElementById('kelas').value,
    mapel1: document.getElementById('mapel1').value,
    mapel2: document.getElementById('mapel2').value
  };

  try {
    const response = await fetch('URL_API_VERCEL_ANDA', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(formData)
    });

    const result = await response.json();
    
    if (result.status === 'success') {
      alert('Pendaftaran berhasil!');
      document.getElementById('successMessage').classList.add('show-message');
    } else {
      throw new Error(result.message);
    }

  } catch (error) {
    alert(`Error: ${error.message}`);
    console.error('Full error:', error);
  }
});
               
                // Show success message
                document.getElementById('successMessage').classList.add('show-message');
                
                // Reset form
                form.reset();
                
                // Hide success message after 5 seconds
                setTimeout(() => {
                    document.getElementById('successMessage').classList.remove('show-message');
                }, 5000);
                
            } catch (error) {
                alert('Terjadi kesalahan: ' + error.message);
                console.error('Error:', error);
            } finally {
                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.innerHTML = originalBtnText;
            }
        });
    </script>
</body>
</html>
